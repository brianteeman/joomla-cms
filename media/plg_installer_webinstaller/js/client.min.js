!function(e,t,a,r){if(!a)throw new Error("Joomla API is not properly initialised");a.apps={view:"dashboard",id:0,ordering:"",cssfiles:[],jsfiles:[],list:0,loaded:0,update:!1},a.loadweb=function(l){if(!l)return!1;var i=new RegExp(apps_base_url),o=new RegExp("^index.php");if(!i.test(l)&&!o.test(l))return e.open(l,"_blank"),!1;if(l+="&product="+apps_product+"&release="+apps_release+"&dev_level="+apps_dev_level+"&list="+(a.apps.list?"list":"grid")+"&pv="+apps_pv,""!==a.apps.ordering&&t.querySelector("#com-apps-ordering").value&&(a.apps.ordering=t.querySelector("#com-apps-ordering").value,l+="&ordering="+a.apps.ordering),t.querySelector("#myTabContent")){var s=t.querySelector("#appsloading");s.style.position="absolute",s.style.left="0",s.style.top="0",s.style.width="100%",s.style.height="100%",t.querySelector("#web").style.position="relative",t.querySelector("#web").appendChild(s),r("#appsloading").trigger("ajaxStart")}return r.ajax({url:l,dataType:"jsonp",cache:!0,jsonpCallback:"jedapps_jsonpcallback",timeout:2e4,success:function(e){if(t.querySelector("#web-loader").style.display="none",t.querySelector("#jed-container").innerHTML=e.data.html,!a.apps.update&&e.data.pluginuptodate<1){a.apps.update=!0;var l=apps_obsolete,i=apps_updateavail2;0==e.data.pluginuptodate&&(l=apps_updateavail1),t.querySelector("#web").insertAdjacentHTML("afterbegin",'<div class="alert alert-info j-jed-message" style="margin-bottom: 20px; line-height: 2em; color:#333333;">'+l+'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input class="btn" type="button" value="'+i+'" onclick="Joomla.submitbuttonInstallWebInstaller()" /></div>')}t.querySelector("#com-apps-searchbox").addEventListener("keypress",function(e){13==e.which&&a.apps.initiateSearch()}),t.querySelector("#search-reset").addEventListener("click",function(e){t.querySelector("#com-apps-searchbox").value="",a.apps.initiateSearch()}),t.querySelector("#com-apps-ordering").addEventListener("change",function(e){a.apps.ordering=r(this).prop("selectedIndex"),a.installfromwebajaxsubmit()}),""!=apps_installfrom_url&&a.installfromweb(apps_installfrom_url)},fail:function(){t.querySelector("#web-loader").style.display="none",t.querySelector("#web-loader-error").style.display="block"},complete:function(){t.querySelector("#joomlaapsinstallatinput")&&(t.querySelector("#joomlaapsinstallatinput").value=apps_installat_url),a.apps.clickforlinks(),a.apps.clicker(),a.apps.list&&t.querySelector(".list-view").click(),t.querySelector("#myTabContent")&&r("#appsloading").trigger("ajaxStop")},error:function(e,a,r){e.responseText&&(t.querySelector("#web-loader-error").innerHTML=e.responseText),t.querySelector("#web-loader").style.display="none",t.querySelector("#web-loader-error").style.display="block"}}),!0},a.webpaginate=function(e,a){t.querySelector("#web-paginate-loader").style.display="block",r.get(e,function(e){t.querySelector("#web-paginate-loader").style.display="none",t.querySelector("#"+a).innerHTML=e.data.html},"jsonp").fail(function(){t.querySelector("#web-paginate-loader").style.display="none"})},a.installfromwebexternal=function(e){return 1==confirm("You will be redirected to the following link to complete the registration/purchase - \n"+e)&&(t.querySelector("#adminForm").setAttribute("action",e),t.querySelector("input[name=task]").setAttribute("disabled",!0),t.querySelector("input[name=install_directory]").setAttribute("disabled",!0),t.querySelector("input[name=install_url]").setAttribute("disabled",!0),t.querySelector("input[name=installtype]").setAttribute("disabled",!0),t.querySelector("input[name=filter_search]").setAttribute("disabled",!0),!0)},a.installfromweb=function(e,a){return e?(t.querySelector("#install_url").value=e,t.querySelector("#uploadform-web-url").innerHTML=e,a?(t.querySelector("#uploadform-web-name").innerHTML=a,t.querySelector("#uploadform-web-name-label").style.display="block"):t.querySelector("#uploadform-web-name-label").style.display="none",t.querySelector("#uploadform-web").style.display="block",!0):(alert("This extension cannot be installed via the web. Please visit the developer's website to purchase/download."),!1)},a.installfromwebcancel=function(){t.querySelector("#uploadform-web").style.display="none",a.apps.list&&t.querySelector(".list-view").click()},a.installfromwebajaxsubmit=function(){var e="&view="+a.apps.view;(a.apps.id&&(e+="&id="+a.apps.id),t.querySelector("#com-apps-searchbox").value)&&(e+="&filter_search="+encodeURI(t.querySelector("#com-apps-searchbox").value.toLowerCase().replace(/ +/g,"_").replace(/[^a-z0-9-_]/g,"").trim()));var r=a.apps.ordering;""!==r&&t.querySelector("#com-apps-ordering").value&&(r=t.querySelector("#com-apps-ordering").value),r&&(e+="&ordering="+r),a.loadweb(apps_base_url+"index.php?format=json&option=com_apps"+e)},a.apps.clickforlinks=function(){[].slice.call(t.querySelectorAll("a.transcode")).forEach(e=>{var t=e.getAttribute("href");e.addEventListener("click",function(e){var r=new RegExp(apps_base_url),l=new RegExp("^index.php");r.test(t)||l.test(t)?(a.apps.view=t.replace(/^.+[&\?]view=(\w+).*$/,"$1"),"dashboard"==a.apps.view?a.apps.id=0:"category"==a.apps.view&&(a.apps.id=t.replace(/^.+[&\?]id=(\d+).*$/,"$1")),e.preventDefault(),a.loadweb(apps_base_url+t)):(e.preventDefault(),a.loadweb(t))}),e.setAttribute("href","#")})},a.apps.initialize=function(){if(a.apps.loaded=1,t.querySelector("#myTabContent")){var e=t.querySelector("#web");e.insertAdjacentHTML("afterbegin",'<div id="appsloading"></div>'),e.style.position="absolute",r("#appsloading").on("ajaxStart",function(){t.querySelector("body").classList.add("ifw-busy"),this.style.display="block"}).on("ajaxStop",function(){this.style.display="none",t.querySelector("body").classList.remove("ifw-busy")})}a.loadweb(apps_base_url+"index.php?format=json&option=com_apps&view=dashboard"),a.apps.clickforlinks()},a.apps.initiateSearch=function(){a.apps.view="dashboard",a.installfromwebajaxsubmit()},a.apps.clicker=function(){t.querySelector(".grid-view").addEventListener("click",function(){a.apps.list=0,t.querySelector(".list-container").classList.add("hidden"),t.querySelector(".grid-container").classList.remove("hidden"),t.querySelector("#btn-list-view").classList.remove("active"),t.querySelector("#btn-grid-view").classList.remove("active")}),t.querySelector(".list-view").addEventListener("click",function(){a.apps.list=1,t.querySelector(".grid-container").classList.add("hidden"),t.querySelector(".list-container").classList.remove("hidden"),t.querySelector("#btn-grid-view").classList.remove("active"),t.querySelector("#btn-list-view").classList.add("active")})},a.submitbutton5=function(e){var r=t.getElementById("adminForm");""!==r.install_url.value&&"http://"!==r.install_url.value?a.submitbutton4():""===r.install_url.value?alert(apps_btntxt):(t.querySelector("#appsloading").style.display="block",r.installtype.value="web",r.submit())}}(window,document,Joomla,jQuery);